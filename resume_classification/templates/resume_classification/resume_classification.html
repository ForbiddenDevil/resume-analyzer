<!-- templates/dummy_page3.html -->
{% extends "base.html" %}

{% block title %}Dummy Page 3 - Resume Analyzer{% endblock %}

{% block content %}
<style>
    .bd-example {
    position: left;
    padding: 1rem;
    margin: 1rem -.75rem 0;
    border: solid #dee2e6;
    border-width: 1px
}
.section {
  border: 1px gray solid;
    padding: 10px;
    border-radius: 10px;
}
</style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="bd-example">

      <h2 class="accordion-header" id="headingOne">
        <strong>Resume Classification</strong> 
      </h2>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}   
        <input type="hidden" name="model_id" id="selectedModel" value="">
        <hr class="2px solid">

        <!-- section vantage details start -->
        <div class="section">
        <h6>Enter Vantage Details</h6>

        <div class="mb-3">
            <label for="host" class="form-label">Vantage Host: </label>
            <input type="text" id="host" name="host" class="form-control" required/></input>
        </div>


        <div class="mb-3">
            <label for="username" class="form-label">User Name: </label>
            <input type="text" id="username" name="username" class="form-control" required/></input>
        </div>


        <div class="mb-3">
            <label for="password" class="form-label">Password: </label>
            <input type="password" id="password" name="password" class="form-control" required/></input>
        </div>
    </div>

        <br>
        <br>
        <hr class="2px solid">

        <!-- section accordion start from here -->
        <div class="section">
        <div class="accordion" id="modelAccordion">
            <!-- Train Model Section -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="trainModelHeader">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#trainModelCollapse" aria-expanded="true" aria-controls="trainModelCollapse">
                  Train Model
                </button>
              </h2>
              <div id="trainModelCollapse" class="accordion-collapse collapse show" aria-labelledby="trainModelHeader" data-bs-parent="#modelAccordion">
                <div class="accordion-body">
                  <h6><strong>Note: Training the model will take approximately 30 minutes. Click on train only if you want to Train the model</strong></h6>    
                  <div class="mb-3">
                    <button class="btn btn-primary select-model" data-model-id="1" type="submit" id="btnTrain" name="train">Train</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Inference Model Section -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="inferenceModelHeader">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#inferenceModelCollapse" aria-expanded="false" aria-controls="inferenceModelCollapse">
                  Inference Model
                </button>
              </h2>
              <div id="inferenceModelCollapse" class="accordion-collapse collapse" aria-labelledby="inferenceModelHeader" data-bs-parent="#modelAccordion">
                <div class="accordion-body">
                  <strong>Select Category and upload Resumes to classify on pre-trained model</strong>
                  <div class="mb-3">
                    <label for="category">Choose a Category:</label>
                    <select name="category" id="category" class="form-select">
                      <option value="ACCOUNTANT">ACCOUNTANT</option>
                      <option value="ADVOCATE">ADVOCATE</option>
                      <option value="AGRICULTURE">AGRICULTURE</option>
                      <option value="APPAREL">APPAREL</option>
                      <option value="ARTS">ARTS</option>
                      <option value="AUTOMOBILE">AUTOMOBILE</option>
                      <option value="AVIATION">AVIATION</option>
                      <option value="BANKING">BANKING</option>
                      <option value="BPO">BPO</option>
                      <option value="BUSINESS-DEVELOPMENT">BUSINESS-DEVELOPMENT</option>
                      <option value="CHEF">CHEF</option>
                      <option value="CONSTRUCTION">CONSTRUCTION</option>
                      <option value="CONSULTANT">CONSULTANT</option>
                      <option value="DESIGNER">DESIGNER</option>
                      <option value="DIGITAL-MEDIA">DIGITAL-MEDIA</option>
                      <option value="ENGINEERING">ENGINEERING</option>
                      <option value="FINANCE">FINANCE</option>
                      <option value="FITNESS">FITNESS</option>
                      <option value="HEALTHCARE">HEALTHCARE</option>
                      <option value="HR">HR</option>
                      <option value="INFORMATION-TECHNOLOGY">INFORMATION-TECHNOLOGY</option>
                      <option value="PUBLIC-RELATIONS">PUBLIC-RELATIONS</option>
                      <option value="SALES">SALES</option>
                      <option value="SAMPLE">SAMPLE</option>
                      <option value="TEACHER">TEACHER</option>
                    </select>
                  </div>

                  <div class="mb-3">
                    <label for="files" class="form-label">Select Resumes:</label>
                    <input class="form-control" name="files" type="file" id="files" multiple required>
                  </div>

                  <div class="mb-3">
                    <button class="btn btn-primary select-model" data-model-id="2" id="btnPred" type="submit" name="predict">Predict</button>
                  </div>
                </div>
              </div>
            </div>
        </div>
        </div>
    </form>
</div>
</div>
</div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const selectButtons = document.querySelectorAll('.select-model');
        const selectedModelInput = document.getElementById('selectedModel');
        const trainBtn = document.getElementById('btnTrain');
        const predBtn = document.getElementById('btnPred');

        selectButtons.forEach(button => {
            button.addEventListener('click', function() {

              const modelId = this.getAttribute('data-model-id');

              // remove DOM
              if (modelId == 1) {
                const elementToRemove = document.getElementById('files');
                elementToRemove.remove();

              }

                selectedModelInput.value = modelId;
                trainBtn.disabled = false;
                predBtn.disabled = false;

                console.log(modelId)

                // Visual feedback
                selectButtons.forEach(btn => btn.classList.remove('btn-success'));
                this.classList.add('btn-success');
            });
        });
    });
    </script>

{% endblock %}